# 機能要件定義書

| 項目 | 内容 |
|------|------|
| プロジェクト名 | PostBlog - 高速ブログ投稿支援アプリ |
| バージョン | 1.0.0 |
| 作成日 | 2026-02-19 |
| 最終更新日 | 2026-02-19 |
| 変更概要 | SEO対策ポイント解説出力機能を追加 |

---

## 1. プロジェクト概要

### 1.1 目的

変化が多い社会に生きる忙しい社会人が、インプットした知識をブログ記事として最速でアウトプットできるデスクトップアプリケーションを開発する。

### 1.2 解決する課題

- ブログ記事作成に時間がかかり、アウトプットが滞る
- インプットからアウトプットまでのタイムラグが大きい
- 複数のブログサービスへの投稿作業が煩雑

### 1.3 ゴール

- インプット完了からアウトプット完了までの負荷低減
- インプットからアウトプットまでのタイムラグ縮小
- 複数サービスへのシームレスな投稿

### 1.4 利用者

- 個人利用（単一ユーザー）
- 知識のアウトプットを習慣化したい社会人

---

## 2. 機能要件一覧

| ID | 機能名 | 優先度 | 概要 |
|----|--------|--------|------|
| F-001 | サービス連携認証 | 必須 | 各ブログサービスとのOAuth/API認証 |
| F-002 | ブログ種別選択 | 必須 | 記事の種別（技術、日記等）を選択 |
| F-003 | チャット形式ヒアリング | 必須 | 記事種別に応じた動的ヒアリング |
| F-004 | 記事プロトタイプ生成 | 必須 | LLM（OpenAI）によるSEO最適化済みブログ記事の自動生成 |
| F-005 | 記事編集 | 必須 | 生成された記事をユーザーが修正 |
| F-006 | 記事投稿 | 必須 | 対象サービスへの記事投稿 |
| F-007 | 投稿先サービス管理 | 必須 | 投稿先サービスの接続設定・管理 |
| F-008 | SEO分析・最適化 | 必須 | SEOスコア表示と改善提案 |
| F-009 | ヒアリングテンプレート管理 | 任意 | ヒアリング項目のカスタマイズ |
| F-010 | 投稿履歴管理 | 任意 | 過去の投稿履歴の閲覧 |

---

## 3. 機能要件詳細

### 3.1 F-001: サービス連携認証

#### 概要

各ブログサービスのAPI認証情報を管理し、記事投稿を可能にする。

#### 要件

- FR-001-01: 以下の7サービスの認証に対応する
  - Qiita（APIトークン）
  - Zenn（GitHub連携）
  - note（公式API未提供のため、将来対応を検討）
  - WordPress（REST API / OAuth）
  - はてなブログ（OAuth / APIキー）
  - Wantedly（公式API未提供のため、将来対応を検討）
  - Ameba Blog（メール投稿機能を利用）
- FR-001-02: 認証情報をローカルに安全に保存する（暗号化）
- FR-001-03: 認証状態（接続済/未接続）を表示する
- FR-001-04: 認証情報の追加・更新・削除ができる
- FR-001-05: 認証トークンの有効期限管理と自動更新を行う

#### 入力

- ユーザーが入力する認証情報（APIトークン、OAuthフロー）

#### 出力

- 認証状態の表示
- 認証成功/失敗の通知

---

### 3.2 F-002: ブログ種別選択

#### 概要

作成する記事の種別を選択し、後続のヒアリング内容を動的に決定する。

#### 要件

- FR-002-01: 以下のブログ種別を選択できる
  - 技術ブログ（事実ベースのヒアリング）
  - 日記・エッセイ（思い・感情ベースのヒアリング）
  - レビュー・書評（評価・分析ベースのヒアリング）
  - ニュース・時事（情報整理ベースのヒアリング）
  - ハウツー・チュートリアル（手順ベースのヒアリング）
- FR-002-02: 種別ごとにヒアリング項目が動的に変わる
- FR-002-03: 種別の追加・カスタマイズが将来的に可能な設計とする

#### 入力

- ユーザーによる種別の選択

#### 出力

- 選択された種別に対応するヒアリングフローの開始

---

### 3.3 F-003: チャット形式ヒアリング

#### 概要

選択されたブログ種別に応じて、チャット形式でユーザーの知識・経験をヒアリングし、記事の素材を収集する。

#### 要件

- FR-003-01: チャットUI形式で対話的にヒアリングを行う
- FR-003-02: ブログ種別に応じてヒアリング内容を動的に変更する
  - 技術ブログ: 技術名、課題、解決方法、コード例、結果
  - 日記・エッセイ: テーマ、出来事、感じたこと、学び
  - レビュー・書評: 対象、概要、良い点、改善点、総合評価
  - ニュース・時事: トピック、背景、論点、自分の見解
  - ハウツー: 目的、前提条件、手順、注意点、完成イメージ
- FR-003-03: ヒアリングの質問はLLMが文脈に応じて動的に生成する
- FR-003-04: ユーザーが任意のタイミングでヒアリングを終了できる
- FR-003-05: ヒアリング中に前の回答を修正できる
- FR-003-06: ヒアリング内容のサマリーを表示し、確認を求める
- FR-003-07: SEO関連のヒアリングを全種別共通で実施する
  - ターゲットキーワード（検索されたいキーワード）
  - 想定読者（ペルソナ）
  - 検索意図（読者が何を知りたいか）

#### 入力

- ユーザーのチャット回答（テキスト入力）

#### 出力

- ヒアリング質問の表示
- ヒアリング内容のサマリー

---

### 3.4 F-004: 記事プロトタイプ生成

#### 概要

ヒアリング結果をもとに、OpenAI APIを使用してブログ記事のプロトタイプを自動生成する。

#### 要件

- FR-004-01: ヒアリング結果からブログ記事のプロトタイプをMarkdown形式で生成する
- FR-004-02: 記事生成にOpenAI API（GPT-4o等）を使用する
- FR-004-03: ブログ種別に応じた適切な記事構成・文体で生成する
- FR-004-04: 生成中の進捗を表示する（ストリーミング表示）
- FR-004-05: 生成結果が不満な場合、再生成を要求できる
- FR-004-06: 投稿先サービスの記事フォーマットに合わせた生成を行う
- FR-004-07: SEO最適化された記事を生成する
  - ターゲットキーワードをタイトル・見出し・本文に適切に配置
  - 検索意図に合致した記事構成で生成
  - SEOに適切な見出し階層（H1→H2→H3）を構成
  - メタディスクリプション（記事概要）を自動生成
  - 内部リンク・関連キーワードの提案を含める
- FR-004-08: プロトタイプごとにSEO対策ポイント解説を生成する
  - 記事プロトタイプと併せて、適用したSEO対策の解説を出力する
  - 各SEOポイントについて「何をしたか」と「なぜ効果的か」を説明する
  - 解説はユーザーが編集時に参照できる形式で表示する
  - ユーザーが記事を修正する際にSEO品質を維持するためのガイドとなる
  - ユーザーのSEO学習を促進し、SEOリテラシー向上に寄与する

#### 入力

- ヒアリング結果のサマリー
- ブログ種別
- 投稿先サービス
- SEO情報（ターゲットキーワード、想定読者、検索意図）

#### 出力

- SEO最適化済みのMarkdown形式ブログ記事プロトタイプ
- メタディスクリプション
- 推奨タグ・キーワード一覧
- SEO対策ポイント解説（プロトタイプに適用したSEO施策と理由の一覧）

---

### 3.5 F-005: 記事編集

#### 概要

生成されたプロトタイプをユーザーが自由に修正・編集できる。

#### 要件

- FR-005-01: Markdown形式で記事を編集できる
- FR-005-02: リアルタイムプレビューを表示する
- FR-005-03: 記事のタイトル、本文、タグを編集できる
- FR-005-04: 編集中の自動保存（下書き保存）を行う
- FR-005-05: 元のプロトタイプとの差分を確認できる
- FR-005-06: 編集内容を破棄して再生成を要求できる

#### 入力

- ユーザーによるテキスト編集操作

#### 出力

- 編集済みのブログ記事

---

### 3.6 F-006: 記事投稿

#### 概要

編集済みの記事を選択したブログサービスに投稿する。

#### 要件

- FR-006-01: 認証済みのサービスに記事を投稿できる
- FR-006-02: 投稿前に最終確認画面を表示する
- FR-006-03: 投稿先サービスを選択できる（複数サービスへの同時投稿も可能）
- FR-006-04: 投稿ステータス（公開/下書き）を選択できる
- FR-006-05: 投稿成功/失敗の通知を表示する
- FR-006-06: 投稿失敗時のリトライ機能を提供する
- FR-006-07: 投稿成功後に記事URLを表示する

#### 入力

- 編集済みの記事
- 投稿先サービスの選択
- 投稿ステータスの選択

#### 出力

- 投稿結果の通知
- 投稿された記事のURL

---

### 3.7 F-007: 投稿先サービス管理

#### 概要

投稿先ブログサービスの接続設定を管理する。

#### 要件

- FR-007-01: サービス一覧画面で接続状態を確認できる
- FR-007-02: 新規サービス接続を追加できる
- FR-007-03: 既存のサービス接続を解除できる
- FR-007-04: 接続テスト（疎通確認）を実行できる

#### 入力

- サービス接続情報

#### 出力

- サービス接続状態の一覧

---

### 3.8 F-008: SEO分析・最適化

#### 概要

記事のSEO品質をリアルタイムで分析し、改善提案を表示する。記事編集画面においてSEOスコアと具体的な改善ポイントをフィードバックする。

#### 要件

- FR-008-01: 記事のSEOスコアを100点満点で算出・表示する
- FR-008-02: 以下のSEO要素を分析し、各項目の達成状況を表示する
  - タイトル最適化（キーワード含有、文字数30〜60文字）
  - メタディスクリプション（120〜160文字、キーワード含有）
  - 見出し構造（H1→H2→H3の適切な階層）
  - キーワード出現率（本文中の自然な使用、目安2〜5%）
  - 本文の文字数（最低1,500文字以上を推奨）
  - 段落構成（適切な段落分け、1段落3〜4文）
  - 画像のalt属性（画像がある場合）
  - 内部リンク・外部リンクの有無
- FR-008-03: 各分析項目に対して具体的な改善提案を表示する
- FR-008-04: 記事編集中にリアルタイムでSEOスコアを更新する
- FR-008-05: LLMを活用したSEO改善提案を生成できる（任意実行）

#### 入力

- 記事タイトル
- 記事本文（Markdown）
- ターゲットキーワード
- メタディスクリプション

#### 出力

- SEOスコア（0〜100点）
- 各分析項目の達成状況（達成/未達成/改善推奨）
- 具体的な改善提案リスト

---

## 4. 対応ブログサービス

### 4.1 サービス別対応方針

| サービス | API対応 | 認証方式 | コンテンツ形式 | 対応フェーズ |
|----------|---------|----------|---------------|-------------|
| Qiita | API v2 | APIトークン | Markdown | Phase 1 |
| Zenn | GitHub連携 | GitHub API | Markdown | Phase 1 |
| WordPress | REST API | OAuth 2.0 / Application Passwords | HTML/Markdown | Phase 1 |
| はてなブログ | AtomPub API | OAuth / WSSE認証 | Markdown/はてな記法 | Phase 1 |
| Ameba Blog | メール投稿 | メールアドレス登録 | テキスト/HTML | Phase 1 |
| note | 公式API未提供 | - | - | Phase 2（検討） |
| Wantedly | 公式API未提供 | - | - | Phase 2（検討） |

### 4.2 Phase 1 対応サービス詳細

#### Qiita

- エンドポイント: `https://qiita.com/api/v2/items`
- 認証: 個人用アクセストークン
- 投稿形式: Markdown
- 必須項目: タイトル、本文、タグ（1個以上）
- 投稿ステータス: 公開 / 限定共有

#### Zenn

- 投稿方式: GitHub リポジトリ連携（zenn-cli）
- 記事ファイル: Markdown（Front Matter付き）
- 必須項目: タイトル、本文、トピック、記事タイプ（tech/idea）
- 投稿フロー: ローカルでMarkdownファイル生成 → GitHubリポジトリへPush

#### WordPress

- エンドポイント: `https://{site}/wp-json/wp/v2/posts`
- 認証: Application Passwords / OAuth 2.0
- 投稿形式: HTML（Markdownからの変換が必要）
- 必須項目: タイトル、本文
- 投稿ステータス: 公開 / 下書き / 予約投稿

#### はてなブログ

- エンドポイント: AtomPub API
- 認証: OAuth / WSSE認証
- 投稿形式: Markdown / はてな記法 / HTML
- 必須項目: タイトル、本文
- 投稿ステータス: 公開 / 下書き

#### Ameba Blog（アメーバブログ）

- 投稿方式: メール投稿（公式機能）
- 認証: 送信元メールアドレスの事前登録 + 専用投稿先メールアドレス
- 投稿形式: メール件名→タイトル、メール本文→記事本文（テキスト/HTML）
- 必須項目: タイトル（件名）、本文
- 投稿ステータス: 公開のみ（メール投稿の制約）
- 制約事項:
  - 公式APIは2014年に廃止済み（AtomAPI）
  - メール投稿ではテーマ（カテゴリ）は1つのみ指定可能
  - Markdown非対応（HTML形式またはプレーンテキスト）

### 4.3 Phase 2 対応サービス（将来検討）

#### note

- 公式APIが未提供のため、以下の代替手段を検討
  - Markdownファイルのエクスポート（手動投稿用）
  - 将来のAPI公開時に対応

#### Wantedly

- 公式APIが未提供のため、以下の代替手段を検討
  - Markdownファイルのエクスポート（手動投稿用）
  - 将来のAPI公開時に対応

---

## 5. ユーザーフロー

### 5.1 基本フロー

```
アプリ起動
  ↓
ホーム画面
  ↓
[ブログ種別選択] → 種別を選択
  ↓
[チャットヒアリング] → 対話形式で情報収集
  ↓
[ヒアリングサマリー確認] → 内容を確認・修正
  ↓
[記事プロトタイプ生成] → LLMが記事を生成
  ↓
[記事編集] → ユーザーが修正
  ↓
[投稿先選択・最終確認] → サービスと投稿ステータスを選択
  ↓
[投稿実行] → サービスへ投稿
  ↓
[投稿完了] → 結果表示
```

### 5.2 初回セットアップフロー

```
アプリ起動（初回）
  ↓
[OpenAI APIキー設定]
  ↓
[投稿先サービス接続設定]
  ↓
ホーム画面
```

---

## 6. データ要件

### 6.1 永続化が必要なデータ

| データ | 保存先 | 暗号化 |
|--------|--------|--------|
| サービス認証情報（APIトークン等） | ローカルファイル | 必須 |
| OpenAI APIキー | ローカルファイル | 必須 |
| ヒアリングテンプレート | ローカルファイル | 不要 |
| 投稿履歴 | ローカルDB（SQLite） | 不要 |
| 下書きデータ | ローカルファイル | 不要 |
| アプリ設定 | ローカルファイル（JSON/TOML） | 不要 |

### 6.2 一時データ

| データ | 保持期間 |
|--------|---------|
| ヒアリングチャット履歴 | セッション中 |
| 生成された記事プロトタイプ | 明示的に破棄するまで |
| 編集中の記事 | 自動保存（セッション終了まで） |

---

## 7. 変更履歴

| 日付 | バージョン | 変更内容 | 担当 |
|------|-----------|---------|------|
| 2026-02-19 | 1.0.0 | 初版作成 | - |
| 2026-02-19 | 1.1.0 | Ameba Blog（アメーバブログ）を投稿先サービスに追加 | - |
| 2026-02-19 | 1.2.0 | SEO分析・最適化機能（F-008）を追加、F-003/F-004にSEO要件を追加 | - |
| 2026-02-19 | 1.3.0 | F-004にSEO対策ポイント解説出力機能（FR-004-08）を追加 | - |
